{"version":3,"sources":["webpack:///src/views/blog/BlogWrite.vue","webpack:///./src/views/blog/BlogWrite.vue?97f5","webpack:///./src/views/blog/BlogWrite.vue"],"names":["BlogWrite","name","mounted","this","$route","params","id","getArticleById","getCategorysAndTags","editorToolBarToFixedWrapper","$_","throttle","editorToolBarToFixed","window","addEventListener","beforeDestroy","removeEventListener","data","publishVisible","categorys","tags","articleForm","title","summary","category","editor","value","ref","default_open","toolbars","bold","italic","header","underline","strikethrough","mark","superscript","subscript","quote","ol","ul","imagelink","code","fullscreen","readmodel","help","undo","redo","trash","navigation","preview","rules","required","message","trigger","max","type","computed","methods","_this","that","Object","api_article","then","assign_default","body","content","map","item","catch","error","$message","showClose","publishShow","length","d_render","publish","_this2","$refs","validate","valid","article","contentHtml","loading","$loading","lock","text","$store","state","token","success","close","$router","push","path","msg","cancel","_this3","$confirm","confirmButtonText","cancelButtonText","tag","toolbar","document","querySelector","documentElement","scrollTop","getElementById","style","display","classList","add","remove","components","base-header","BaseHeader","markdown-editor","MarkdownEditor","beforeRouteEnter","to","from","next","backgroundColor","beforeRouteLeave","blog_BlogWrite","render","_vm","_h","$createElement","_c","_self","directives","rawName","attrs","data-title","simple","span","offset","staticClass","_v","round","on","click","resize","autosize","placeholder","model","callback","$$v","$set","expression","staticStyle","visibility","height","visible","close-on-click-modal","custom-class","update:visible","$event","prop","rows","label","value-key","_l","c","key","categoryName","t","_s","tagName","slot","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/9.3236c7250e5df9c6025c.js","sourcesContent":["<template>\r\n  <div id=\"write\" v-title :data-title=\"title\">\r\n    <el-container>\r\n      <base-header :simple=true>\r\n        <el-col :span=\"4\" :offset=\"2\">\r\n          <div class=\"me-write-info\">写文章</div>\r\n        </el-col>\r\n        <el-col :span=\"4\" :offset=\"6\">\r\n          <div class=\"me-write-btn\">\r\n            <el-button round @click=\"publishShow\">发布</el-button>\r\n            <el-button round @click=\"cancel\">取消</el-button>\r\n          </div>\r\n        </el-col>\r\n      </base-header>\r\n\r\n      <el-container class=\"me-area me-write-box\">\r\n        <el-main class=\"me-write-main\">\r\n          <div class=\"me-write-title\">\r\n            <el-input resize=\"none\"\r\n                      type=\"textarea\"\r\n                      autosize\r\n                      v-model=\"articleForm.title\"\r\n                      placeholder=\"请输入标题\"\r\n                      class=\"me-write-input\">\r\n            </el-input>\r\n\r\n          </div>\r\n          <div id=\"placeholder\" style=\"visibility: hidden;height: 89px;display: none;\"></div>\r\n          <markdown-editor :editor=\"articleForm.editor\" class=\"me-write-editor\"></markdown-editor>\r\n        </el-main>\r\n      </el-container>\r\n\r\n      <el-dialog title=\"摘要 分类 标签\"\r\n                 :visible.sync=\"publishVisible\"\r\n                 :close-on-click-modal=false\r\n                 custom-class=\"me-dialog\">\r\n\r\n        <el-form :model=\"articleForm\" ref=\"articleForm\" :rules=\"rules\">\r\n          <el-form-item prop=\"summary\">\r\n            <el-input type=\"textarea\"\r\n                      v-model=\"articleForm.summary\"\r\n                      :rows=\"6\"\r\n                      placeholder=\"请输入摘要\">\r\n            </el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"文章分类\" prop=\"category\">\r\n            <el-select v-model=\"articleForm.category\" value-key=\"id\" placeholder=\"请选择文章分类\">\r\n              <el-option v-for=\"c in categorys\" :key=\"c.id\" :label=\"c.categoryName\" :value=\"c\"></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n\r\n          <el-form-item label=\"文章标签\" prop=\"tags\">\r\n            <el-checkbox-group v-model=\"articleForm.tags\">\r\n              <el-checkbox v-for=\"t in tags\" :key=\"t.id\" :label=\"t.id\" name=\"tags\">{{t.tagName}}</el-checkbox>\r\n            </el-checkbox-group>\r\n          </el-form-item>\r\n        </el-form>\r\n        <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"publishVisible = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"publish('articleForm')\">发布</el-button>\r\n        </div>\r\n      </el-dialog>\r\n    </el-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import BaseHeader from '@/views/BaseHeader'\r\n  import MarkdownEditor from '@/components/markdown/MarkdownEditor'\r\n  import {publishArticle, getArticleById} from '@/api/article'\r\n  import {getAllCategorys} from '@/api/category'\r\n  import {getAllTags} from '@/api/tag'\r\n\r\n  export default {\r\n    name: 'BlogWrite',\r\n    mounted() {\r\n\r\n      if(this.$route.params.id){\r\n        this.getArticleById(this.$route.params.id)\r\n      }\r\n\r\n      this.getCategorysAndTags()\r\n      this.editorToolBarToFixedWrapper = this.$_.throttle(this.editorToolBarToFixed, 200)\r\n\r\n      window.addEventListener('scroll', this.editorToolBarToFixedWrapper, false);\r\n    },\r\n    beforeDestroy() {\r\n      window.removeEventListener('scroll', this.editorToolBarToFixedWrapper, false)\r\n    },\r\n    data() {\r\n      return {\r\n        publishVisible: false,\r\n        categorys: [],\r\n        tags: [],\r\n        articleForm: {\r\n          id: '',\r\n          title: '',\r\n          summary: '',\r\n          category: '',\r\n          tags: [],\r\n          editor: {\r\n            value: '',\r\n            ref: '',//保存mavonEditor实例  实际不该这样\r\n            default_open: 'edit',\r\n            toolbars: {\r\n              bold: true, // 粗体\r\n              italic: true, // 斜体\r\n              header: true, // 标题\r\n              underline: true, // 下划线\r\n              strikethrough: true, // 中划线\r\n              mark: true, // 标记\r\n              superscript: true, // 上角标\r\n              subscript: true, // 下角标\r\n              quote: true, // 引用\r\n              ol: true, // 有序列表\r\n              ul: true, // 无序列表\r\n              imagelink: true, // 图片链接\r\n              code: true, // code\r\n              fullscreen: true, // 全屏编辑\r\n              readmodel: true, // 沉浸式阅读\r\n              help: true, // 帮助\r\n              undo: true, // 上一步\r\n              redo: true, // 下一步\r\n              trash: true, // 清空\r\n              navigation: true, // 导航目录\r\n              //subfield: true, // 单双栏模式\r\n              preview: true, // 预览\r\n            }\r\n          }\r\n        },\r\n        rules: {\r\n          summary: [\r\n            {required: true, message: '请输入摘要', trigger: 'blur'},\r\n            {max: 80, message: '不能大于80个字符', trigger: 'blur'}\r\n          ],\r\n          category: [\r\n            {required: true, message: '请选择文章分类', trigger: 'change'}\r\n          ],\r\n          tags: [\r\n            {type: 'array', required: true, message: '请选择标签', trigger: 'change'}\r\n          ]\r\n        }\r\n      }\r\n    },\r\n    computed: {\r\n      title (){\r\n        return '写文章 - 一乐博客'\r\n\t\t}\r\n\t},\r\n    methods: {\r\n      getArticleById(id) {\r\n        let that = this\r\n        getArticleById(id).then(data => {\r\n\r\n          Object.assign(that.articleForm, data.data)\r\n          that.articleForm.editor.value = data.data.body.content\r\n\r\n          let tags = this.articleForm.tags.map(function (item) {\r\n            return item.id;\r\n          })\r\n\r\n          this.articleForm.tags = tags\r\n\r\n\r\n        }).catch(error => {\r\n          if (error !== 'error') {\r\n            that.$message({type: 'error', message: '文章加载失败', showClose: true})\r\n          }\r\n        })\r\n      },\r\n      publishShow() {\r\n        if (!this.articleForm.title) {\r\n          this.$message({message: '标题不能为空哦', type: 'warning', showClose: true})\r\n          return\r\n        }\r\n\r\n        if (this.articleForm.title.length > 30) {\r\n          this.$message({message: '标题不能大于30个字符', type: 'warning', showClose: true})\r\n          return\r\n        }\r\n\r\n        if (!this.articleForm.editor.ref.d_render) {\r\n          this.$message({message: '内容不能为空哦', type: 'warning', showClose: true})\r\n          return\r\n        }\r\n\r\n        this.publishVisible = true;\r\n      },\r\n      publish(articleForm) {\r\n\r\n        let that = this\r\n\r\n        this.$refs[articleForm].validate((valid) => {\r\n          if (valid) {\r\n\r\n            let tags = this.articleForm.tags.map(function (item) {\r\n              return {id: item};\r\n            });\r\n\r\n            let article = {\r\n              id: this.articleForm.id,\r\n              title: this.articleForm.title,\r\n              summary: this.articleForm.summary,\r\n              category: this.articleForm.category,\r\n              tags: tags,\r\n              body: {\r\n                content: this.articleForm.editor.value,\r\n                contentHtml: this.articleForm.editor.ref.d_render\r\n              }\r\n\r\n            }\r\n\r\n            this.publishVisible = false;\r\n\r\n            let loading = this.$loading({\r\n              lock: true,\r\n              text: '发布中，请稍后...'\r\n            })\r\n\r\n            publishArticle(article,this.$store.state.token).then((data) => {\r\n              if(data.success){\r\n                loading.close();\r\n                that.$message({message: '发布成功啦', type: 'success', showClose: true})\r\n                that.$router.push({path: `/view/${data.data.id}`})\r\n              }else{\r\n                that.$message({message: error, type: '发布文章失败:'+data.msg, showClose: true});\r\n              }\r\n\r\n            }).catch((error) => {\r\n              loading.close();\r\n              if (error !== 'error') {\r\n                that.$message({message: error, type: 'error', showClose: true});\r\n              }\r\n            })\r\n\r\n          } else {\r\n            return false;\r\n          }\r\n        });\r\n      },\r\n      cancel() {\r\n        this.$confirm('文章将不会保存, 是否继续?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          this.$router.push('/')\r\n        })\r\n      },\r\n      getCategorysAndTags() {\r\n        let that = this\r\n        getAllCategorys().then(data => {\r\n          if(data.success){\r\n            that.categorys = data.data\r\n          }else{\r\n             that.$message({type: 'error', message: '文章分类加载失败', showClose: true})\r\n          }\r\n\r\n        }).catch(error => {\r\n          if (error !== 'error') {\r\n            that.$message({type: 'error', message: '文章分类加载失败', showClose: true})\r\n          }\r\n        })\r\n\r\n        getAllTags().then(data => {\r\n          if(data.success){\r\n            that.tags = data.data\r\n          }else{\r\n             that.$message({type: 'error', message: '标签加载失败', showClose: true})\r\n          }\r\n        }).catch(error => {\r\n          if (error !== 'error') {\r\n            that.$message({type: 'error', message: '标签加载失败', showClose: true})\r\n          }\r\n        })\r\n\r\n      },\r\n      editorToolBarToFixed() {\r\n\r\n        let toolbar = document.querySelector('.v-note-op');\r\n        let curHeight = document.documentElement.scrollTop || document.body.scrollTop;\r\n        if (curHeight >= 160) {\r\n          document.getElementById(\"placeholder\").style.display = \"block\"; //bad  用计算属性较好\r\n          toolbar.classList.add(\"me-write-toolbar-fixed\");\r\n        } else {\r\n          document.getElementById(\"placeholder\").style.display = \"none\";\r\n          toolbar.classList.remove(\"me-write-toolbar-fixed\");\r\n        }\r\n      }\r\n    },\r\n    components: {\r\n      'base-header': BaseHeader,\r\n      'markdown-editor': MarkdownEditor\r\n    },\r\n    //组件内的守卫 调整body的背景色\r\n    beforeRouteEnter(to, from, next) {\r\n      window.document.body.style.backgroundColor = '#fff';\r\n      next();\r\n    },\r\n    beforeRouteLeave(to, from, next) {\r\n      window.document.body.style.backgroundColor = '#f5f5f5';\r\n      next();\r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n  .el-header {\r\n    position: fixed;\r\n    z-index: 1024;\r\n    min-width: 100%;\r\n    box-shadow: 0 2px 3px hsla(0, 0%, 7%, .1), 0 0 0 1px hsla(0, 0%, 7%, .1);\r\n  }\r\n\r\n  .me-write-info {\r\n    line-height: 60px;\r\n    font-size: 18px;\r\n    font-weight: 600;\r\n  }\r\n\r\n  .me-write-btn {\r\n    margin-top: 10px;\r\n  }\r\n\r\n  .me-write-box {\r\n    max-width: 700px;\r\n    margin: 80px auto 0;\r\n  }\r\n\r\n  .me-write-main {\r\n    padding: 0;\r\n  }\r\n\r\n  .me-write-title {\r\n  }\r\n\r\n  .me-write-input textarea {\r\n    font-size: 32px;\r\n    font-weight: 600;\r\n    height: 20px;\r\n    border: none;\r\n  }\r\n\r\n  .me-write-editor {\r\n    min-height: 650px !important;\r\n  }\r\n\r\n  .me-header-left {\r\n    margin-top: 10px;\r\n  }\r\n\r\n  .me-title img {\r\n    max-height: 2.4rem;\r\n    max-width: 100%;\r\n  }\r\n\r\n  .me-write-toolbar-fixed {\r\n    position: fixed;\r\n    width: 700px !important;\r\n    top: 60px;\r\n  }\r\n\r\n  .v-note-op {\r\n    box-shadow: none !important;\r\n  }\r\n\r\n  .auto-textarea-input, .auto-textarea-block {\r\n    font-size: 18px !important;\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/blog/BlogWrite.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"title\",rawName:\"v-title\"}],attrs:{\"id\":\"write\",\"data-title\":_vm.title}},[_c('el-container',[_c('base-header',{attrs:{\"simple\":true}},[_c('el-col',{attrs:{\"span\":4,\"offset\":2}},[_c('div',{staticClass:\"me-write-info\"},[_vm._v(\"写文章\")])]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":4,\"offset\":6}},[_c('div',{staticClass:\"me-write-btn\"},[_c('el-button',{attrs:{\"round\":\"\"},on:{\"click\":_vm.publishShow}},[_vm._v(\"发布\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"round\":\"\"},on:{\"click\":_vm.cancel}},[_vm._v(\"取消\")])],1)])],1),_vm._v(\" \"),_c('el-container',{staticClass:\"me-area me-write-box\"},[_c('el-main',{staticClass:\"me-write-main\"},[_c('div',{staticClass:\"me-write-title\"},[_c('el-input',{staticClass:\"me-write-input\",attrs:{\"resize\":\"none\",\"type\":\"textarea\",\"autosize\":\"\",\"placeholder\":\"请输入标题\"},model:{value:(_vm.articleForm.title),callback:function ($$v) {_vm.$set(_vm.articleForm, \"title\", $$v)},expression:\"articleForm.title\"}})],1),_vm._v(\" \"),_c('div',{staticStyle:{\"visibility\":\"hidden\",\"height\":\"89px\",\"display\":\"none\"},attrs:{\"id\":\"placeholder\"}}),_vm._v(\" \"),_c('markdown-editor',{staticClass:\"me-write-editor\",attrs:{\"editor\":_vm.articleForm.editor}})],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"摘要 分类 标签\",\"visible\":_vm.publishVisible,\"close-on-click-modal\":false,\"custom-class\":\"me-dialog\"},on:{\"update:visible\":function($event){_vm.publishVisible=$event}}},[_c('el-form',{ref:\"articleForm\",attrs:{\"model\":_vm.articleForm,\"rules\":_vm.rules}},[_c('el-form-item',{attrs:{\"prop\":\"summary\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":6,\"placeholder\":\"请输入摘要\"},model:{value:(_vm.articleForm.summary),callback:function ($$v) {_vm.$set(_vm.articleForm, \"summary\", $$v)},expression:\"articleForm.summary\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"文章分类\",\"prop\":\"category\"}},[_c('el-select',{attrs:{\"value-key\":\"id\",\"placeholder\":\"请选择文章分类\"},model:{value:(_vm.articleForm.category),callback:function ($$v) {_vm.$set(_vm.articleForm, \"category\", $$v)},expression:\"articleForm.category\"}},_vm._l((_vm.categorys),function(c){return _c('el-option',{key:c.id,attrs:{\"label\":c.categoryName,\"value\":c}})}),1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"文章标签\",\"prop\":\"tags\"}},[_c('el-checkbox-group',{model:{value:(_vm.articleForm.tags),callback:function ($$v) {_vm.$set(_vm.articleForm, \"tags\", $$v)},expression:\"articleForm.tags\"}},_vm._l((_vm.tags),function(t){return _c('el-checkbox',{key:t.id,attrs:{\"label\":t.id,\"name\":\"tags\"}},[_vm._v(_vm._s(t.tagName))])}),1)],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.publishVisible = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.publish('articleForm')}}},[_vm._v(\"发布\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-32f2b936\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/blog/BlogWrite.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-32f2b936\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./BlogWrite.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./BlogWrite.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./BlogWrite.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-32f2b936\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./BlogWrite.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/blog/BlogWrite.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}